
# Author    KMS - Martin Dubois, P. Eng.
# Copyright (C) 2023 KMS
# License   http://www.apache.org/licenses/LICENSE-2.0
# Product   KMS-Framework
# File      STM32/H747xx_m7/Test/makefile

include ../../$(CONFIG).mk

include $(KMS_MAKEFILES)/stm32h747xx_m7.mk

LIBRARIES = $(KMS_STM32_A) $(KMS_A_A)

OUTPUT = ../Binaries/$(CONFIG)/Test.elf

SOURCES = Test.cpp

# ===== Macros ==============================================================

OBJECTS = $(SOURCES:.cpp=.o)

# ===== Rules ===============================================================

.cpp.o:
	$(GPP) -c $(CFLAGS) -o $@ $(INCLUDES) $<

# ===== Targets =============================================================

$(OUTPUT): Startup.o $(OBJECTS) $(LIBRARIES)
	$(GPP) $(CFLAGS) -T"$(KMS_LINKER_SCRIPTS)/STM32H747XX_M7_FLASH.ld" -Wl,-Map="Test.map" -o $@ $^ -lc_nano -lnosys
	$(SIZE) $@

# ===== Specific rules ======================================================

Startup.o: $(KMS_STARTUP)/startup_stm32H747xx_m7.s
	$(AS) -c $(CFLAGS) -o $@ $<

# DO NOT DELETE - Generated by KMS::Build::Make !

Test.o: ../../../Includes/KMS/Base.h ../../../Includes/KMS/DAQ/DAQ.h ../../../Includes/KMS/DAQ/DigitalOutput.h ../../../Includes/KMS/Embedded/IInterruptHandler.h ../../../Includes/KMS/Embedded/Test.h ../../../Includes/KMS/Embedded/USART.h ../../../Includes/KMS/Embedded/WorkItem.h ../../../Includes/KMS/File/Folder.h ../../../Includes/KMS/Msg/Destination.h ../../../Includes/KMS/Msg/IReceiver.h ../../../Includes/KMS/STM/STM32H.h ../../../Includes/KMS/SafeAPI.h ../../../Includes/KMS/Version.h ../../../Includes/KMS/WOP/FrameBuffer.h ../../../Includes/KMS/WOP/Link_USART.h ../../../Includes/KMS/WOP/Object.h ../../../Includes/KMS/WOP/System.h ../../../Includes/KMS/WOP/WOP.h

